import clsx from 'clsx';
import { isEmpty, isNil } from 'lodash';
import { FieldErrors } from 'react-hook-form';
import { useTranslation } from 'react-i18next';

type LocalFormErrorProps = {
    errors: FieldErrors<any>;
    className?: string;
}

export const LocalFormError = ({
    errors,
    className,
}: LocalFormErrorProps) => {

    //>────────────────────────────────────────────────────────────────────────────────────────────────<
    //> Contexts                                                                                       <
    //>────────────────────────────────────────────────────────────────────────────────────────────────<

    //>────────────────────────────────────────────────────────────────────────────────────────────────<
    //> State                                                                                          <
    //>────────────────────────────────────────────────────────────────────────────────────────────────<

    //>────────────────────────────────────────────────────────────────────────────────────────────────<
    //> Libs                                                                                           <
    //>────────────────────────────────────────────────────────────────────────────────────────────────<

    // I18n
    const { t } = useTranslation();

    //>────────────────────────────────────────────────────────────────────────────────────────────────<
    //> Queries                                                                                        <
    //>────────────────────────────────────────────────────────────────────────────────────────────────<

    //>────────────────────────────────────────────────────────────────────────────────────────────────<
    //> Getters                                                                                        <
    //>────────────────────────────────────────────────────────────────────────────────────────────────<

    //>────────────────────────────────────────────────────────────────────────────────────────────────<
    //> Callbacks                                                                                      <
    //>────────────────────────────────────────────────────────────────────────────────────────────────<

    if (isNil(errors) || isEmpty(errors)) return null;

    return (
        <div
            className={ clsx([
                'text-center',
                className,
            ]) }
        >
            <p className='text-error'>{t('local-form-error.invalid-fields')}</p>
        </div>
    );
};
